"use strict";!function(){function e(){var e=this,a=lf.schema.create("agenda",1);e.init=function(){console.info("creating initial schema"),a.createTable("User").addColumn("id",lf.Type.INTEGER).addColumn("name",lf.Type.STRING).addPrimaryKey([{name:"id",autoIncrement:!1}]),a.createTable("Contact").addColumn("id",lf.Type.INTEGER).addColumn("name",lf.Type.STRING).addColumn("email",lf.Type.STRING).addColumn("description",lf.Type.STRING).addColumn("birthdate",lf.Type.DATE_TIME).addColumn("starred",lf.Type.BOOLEAN).addColumn("picture",lf.Type.OBJECT).addNullable(["picture","description","birthdate","starred"]).addUnique("uq_email",["email"]).addPrimaryKey([{name:"id",autoIncrement:!0}]).addIndex("idx_contact",[{name:"name",order:lf.Order.ASC}]),a.createTable("Category").addColumn("id",lf.Type.INTEGER).addColumn("name",lf.Type.STRING).addColumn("description",lf.Type.STRING).addColumn("picture",lf.Type.OBJECT).addNullable(["picture","description"]).addPrimaryKey([{name:"id",autoIncrement:!0}]).addUnique("uq_name",["name"]).addIndex("idx_category",[{name:"name",order:lf.Order.ASC}]),a.createTable("ContactCategory").addColumn("id",lf.Type.INTEGER).addColumn("contact_id",lf.Type.INTEGER).addColumn("category_id",lf.Type.INTEGER).addPrimaryKey([{name:"id",autoIncrement:!0}]).addForeignKey("fk_contact",{local:"contact_id",ref:"Contact.id",action:lf.ConstraintAction.CASCADE,timing:lf.ConstraintAction.IMMEDIATE}).addForeignKey("fk_category",{local:"category_id",ref:"Category.id",action:lf.ConstraintAction.CASCADE,timing:lf.ConstraintAction.IMMEDIATE})},e.$get=function(){return{dbPromise:Promise.resolve(a.connect()).then(function(e){return Promise.resolve(e)})}}}require(["app"],function(a){a.provider("db",e)}),define(["app"],function(){return e})}();