"use strict";!function(){function e(e,n,t,o){var r=this,i=function(n){return e.getSchema("Category").then(function(t){var o=lf.op.and(t.id.neq(n.id),t.name.eq(n.name));return e.executeQuery(t,o).then(function(e){return 0===e.length})})};r.update=function(t,r,a){"name"===r?!function(){var u=t.name;t[r]=a,Promise.resolve(i(t)).then(function(e){if(!e){t[r]=u;var o="Can't update the category name field",i="Error";return n.showMessage(i,o).then(function(){}).then(function(){return Promise.reject(!1)})}}).then(function(n){t[r]=a,e.update("Category",t.id,t).then(function(){o.$apply()})})}():(t[r]=a,e.update("Category",t.id,t).then(function(){o.$apply()}))},r.remove=function(o,r){var i="Are you sure?",a="You are about to remove the category",u="Go ahead";n.openConfirmDialog(o,i,a,u).then(function(o){o&&e.del("Category",r).then(function(e){return Promise.resolve(!0)},function(e){return Promise.reject(!1)}).then(function(){var e="Category removed",o="Done";n.showMessage(o,e).then(function(){}).then(function(){t.reload()})})})}}require(["app"],function(n){n.component("category",{templateUrl:"/src/components/templates/categoryTemplate.html",controller:e,controllerAs:"category",bindings:{data:"=",hideButtons:"=",hideText:"="}})}),define(["app","services/dbService","services/dialogService","components/editableFieldComponent"],function(){return e})}();