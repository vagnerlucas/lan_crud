"use strict";!function(){function e(e){var t=this,r=this;r.getById=function(t,r){return e.dbPromise.then(function(e){var n=e.getSchema().table(t);return e.select().from(n).where(n.id.eq(r)).exec().then(function(e){return Promise.resolve(e)},function(e){return Promise.reject(null)})})},r.list=function(t){return e.dbPromise.then(function(e){var r=e.getSchema().table(t);return e.select().from(r).exec().then(function(e){return Promise.resolve(e)},function(e){return Promise.reject(e)})})},r.add=function(r,n){return e.dbPromise.then(function(e){var o=e.getSchema().table(r),c=o.createRow(n);return e.insert().into(o).values([c]).exec().then(function(){return t},function(e){return Promise.reject(e)})})},r.getSchema=function(t){return e.dbPromise.then(function(e){return e.getSchema().table(t)})},r.executeQuery=function(t,r){return e.dbPromise.then(function(e){return e.select().from(t).where(r).exec().then(function(e){return Promise.resolve(e)},function(e){throw e})})},r.del=function(r,n){return e.dbPromise.then(function(e){var o=e.getSchema().table(r);return e.delete().from(o).where(o.id.eq(n)).exec().then(function(){return t},function(e){Promise.reject(e)})})},r.update=function(t,r,n){return e.dbPromise.then(function(e){var o=e.getSchema().table(t);try{for(var c in o.K)e.update(o).set(o.K[c],n[o.K[c].A]).where(o.id.eq(r)).exec();return Promise.resolve(!0)}catch(e){return Promise.reject(e)}})},r.clearData=function(){return e.dbPromise.then(function(e){try{["Contact","Category","ContactCategory","User"].forEach(function(t,r){var n=e.getSchema().table(t);e.delete().from(n).exec()})}catch(e){console.error(e)}finally{return Promise.resolve(e)}}).then(function(e){return setTimeout(function(){return Promise.resolve(!0)},100)})}}e.$inject=["db"],require(["app"],function(t){t.service("DBService",e)}),define(["app","providers/dbProvider"],function(){return e})}();