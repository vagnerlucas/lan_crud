"use strict";!function(){function e(e,n,t,r){var o=function(){return r.getById("User",1).then(function(n){return Promise.resolve(e.existUser=1==n.length)},function(e){return Promise.resolve(!1)})};e.$on("$stateChangeStart",function(n,r,i){if(e.existUser){if("/login"!==r.url&&"/"!==r.url)return;n.preventDefault()}else{if("/login"===r.url)return;n.preventDefault()}Promise.resolve(o()).then(function(){e.existUser?"/login"===r.url||"/"===r.url?t.go("home.contacts"):t.go(r,i):t.go("login")})})}e.$inject=["$rootScope","$location","$state","DBService"],define(["angularAMD","services/dbService"],function(){return e})}();